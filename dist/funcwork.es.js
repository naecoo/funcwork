var r=function(){return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,t){var e=[],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){o=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return e}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();export default function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Worker)throw Error("the current runtime does not support web worker");if(!Promise)throw Error("the current runtime does not support Promise");var e=void 0,n=void 0,o=new Map,i=function(r){return r.name},a=Function.prototype.toString;return{add:function(){for(var u=arguments.length,f=Array(u),c=0;u>c;c++)f[c]=arguments[c];f.forEach(function(r){if("function"!=typeof r)throw Error(r+" should be a function");var t=i(r);o.set(t,r)});var l="",s=!0,v=!1,d=void 0;try{for(var h,y=o.entries()[Symbol.iterator]();!(s=(h=y.next()).done);s=!0){var m=r(h.value,2);l+=m[0]+": "+a.call(m[1])+","}}catch(r){v=!0,d=r}finally{try{!s&&y.return&&y.return()}finally{if(v)throw d}}n=URL.createObjectURL(new Blob(["var methods = {"+l+"};\n%{worker_scheduler}"])),e=new Worker(n,t)},invoke:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!o.has(r))throw Error(r+" is not defined");return new Promise(function(n,o){e.onmessage=function(r){var t=JSON.parse(r.data);n(t)},e.onerror=function(r){o(r.message)},e.postMessage(JSON.stringify({method:r,params:t}))})},terminate:function(){e&&(e.terminate(),e=null),URL.revokeObjectURL(n),o.clear()}}}
