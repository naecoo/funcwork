!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(r=r||self).funcwork=e()}(this,function(){"use strict";var r=function(){return function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);n=!0);}catch(r){o=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Worker)throw Error("the current runtime does not support web worker");if(!Promise)throw Error("the current runtime does not support Promise");var t=void 0,n=void 0,o=new Map,i=function(r){return r.name},a=Function.prototype.toString;return{add:function(){for(var u=arguments.length,f=Array(u),c=0;u>c;c++)f[c]=arguments[c];f.forEach(function(r){if("function"!=typeof r)throw Error(r+" should be a function");var e=i(r);o.set(e,r)});var s="",l=!0,d=!1,v=void 0;try{for(var h,y=o.entries()[Symbol.iterator]();!(l=(h=y.next()).done);l=!0){var m=r(h.value,2);s+=m[0]+": "+a.call(m[1])+","}}catch(r){d=!0,v=r}finally{try{!l&&y.return&&y.return()}finally{if(d)throw v}}n=URL.createObjectURL(new Blob(["var methods = {"+s+"};\n%{worker_scheduler}"])),t=new Worker(n,e)},invoke:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!o.has(r))throw Error(r+" is not defined");return new Promise(function(n,o){t.onmessage=function(r){var e=JSON.parse(r.data);n(e)},t.onerror=function(r){o(r.message)},t.postMessage(JSON.stringify({method:r,params:e}))})},terminate:function(){t&&(t.terminate(),t=null),URL.revokeObjectURL(n),o.clear()}}}});
